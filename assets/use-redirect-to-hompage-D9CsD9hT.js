import{r as i,R as m,N as v,j as R,B as G,a2 as _,bi as A,m as T,l as N}from"./index-jqWcwVkE.js";var k=["color","size","title","className"];function S(){return S=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t])}return e},S.apply(this,arguments)}function z(e,r){if(e==null)return{};var n=B(e,r),t,o;if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(o=0;o<c.length;o++)t=c[o],!(r.indexOf(t)>=0)&&Object.prototype.propertyIsEnumerable.call(e,t)&&(n[t]=e[t])}return n}function B(e,r){if(e==null)return{};var n={},t=Object.keys(e),o,c;for(c=0;c<t.length;c++)o=t[c],!(r.indexOf(o)>=0)&&(n[o]=e[o]);return n}var O=i.forwardRef(function(e,r){var n=e.color,t=e.size,o=e.title,c=e.className,s=z(e,k);return m.createElement("svg",S({ref:r,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",width:t,height:t,fill:n,className:["bi","bi-google",c].filter(Boolean).join(" ")},s),o?m.createElement("title",null,o):null,m.createElement("path",{d:"M15.545 6.558a9.4 9.4 0 0 1 .139 1.626c0 2.434-.87 4.492-2.384 5.885h.002C11.978 15.292 10.158 16 8 16A8 8 0 1 1 8 0a7.7 7.7 0 0 1 5.352 2.082l-2.284 2.284A4.35 4.35 0 0 0 8 3.166c-2.087 0-3.86 1.408-4.492 3.304a4.8 4.8 0 0 0 0 3.063h.003c.635 1.893 2.405 3.301 4.492 3.301 1.078 0 2.004-.276 2.722-.764h-.003a3.7 3.7 0 0 0 1.599-2.431H8v-3.08z"}))});O.propTypes={color:v.string,size:v.oneOfType([v.string,v.number]),title:v.string,className:v.string};O.defaultProps={color:"currentColor",size:"1em",title:null,className:""};function M(e={}){const{nonce:r,onScriptLoadSuccess:n,onScriptLoadError:t}=e,[o,c]=i.useState(!1),s=i.useRef(n);s.current=n;const g=i.useRef(t);return g.current=t,i.useEffect(()=>{const l=document.createElement("script");return l.src="https://accounts.google.com/gsi/client",l.async=!0,l.defer=!0,l.nonce=r,l.onload=()=>{var a;c(!0),(a=s.current)===null||a===void 0||a.call(s)},l.onerror=()=>{var a;c(!1),(a=g.current)===null||a===void 0||a.call(g)},document.body.appendChild(l),()=>{document.body.removeChild(l)}},[r]),o}const x=i.createContext(null);function I({clientId:e,nonce:r,onScriptLoadSuccess:n,onScriptLoadError:t,children:o}){const c=M({nonce:r,onScriptLoadSuccess:n,onScriptLoadError:t}),s=i.useMemo(()=>({clientId:e,scriptLoadedSuccessfully:c}),[e,c]);return m.createElement(x.Provider,{value:s},o)}function q(){const e=i.useContext(x);if(!e)throw new Error("Google OAuth components must be used within GoogleOAuthProvider");return e}function F({flow:e="implicit",scope:r="",onSuccess:n,onError:t,onNonOAuthError:o,overrideScope:c,state:s,...g}){const{clientId:l,scriptLoadedSuccessfully:a}=q(),h=i.useRef(),b=i.useRef(n);b.current=n;const w=i.useRef(t);w.current=t;const y=i.useRef(o);y.current=o,i.useEffect(()=>{var u,d;if(!a)return;const j=e==="implicit"?"initTokenClient":"initCodeClient",L=(d=(u=window==null?void 0:window.google)===null||u===void 0?void 0:u.accounts)===null||d===void 0?void 0:d.oauth2[j]({client_id:l,scope:c?r:`openid profile email ${r}`,callback:p=>{var f,C;if(p.error)return(f=w.current)===null||f===void 0?void 0:f.call(w,p);(C=b.current)===null||C===void 0||C.call(b,p)},error_callback:p=>{var f;(f=y.current)===null||f===void 0||f.call(y,p)},state:s,...g});h.current=L},[l,a,e,r,s]);const E=i.useCallback(u=>{var d;return(d=h.current)===null||d===void 0?void 0:d.requestAccessToken(u)},[]),P=i.useCallback(()=>{var u;return(u=h.current)===null||u===void 0?void 0:u.requestCode()},[]);return e==="implicit"?E:P}const W=({onGoogleAuthError:e,onGoogleAuthSuccess:r})=>{const n=F({onSuccess:r,onError:e}),t=o=>{o.preventDefault(),o.stopPropagation(),n()};return R.jsxs(G,{className:"font-semibold",onClick:t,children:[R.jsx(O,{}),"Google"]})},D=({redirectTo:e}={})=>{const r=_(A),[n]=T(),t=N();i.useEffect(()=>{if(!r)return;const o=e||n.get("redirectTo")||"/";console.log("redirectTo",o),t(o,{replace:!0})},[r])};export{W as C,I as G,D as u};
