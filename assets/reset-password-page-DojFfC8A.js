import{j as s,z as S,I as d,L as N,B as y,m as v,bl as F,D as E,l as R,r as m,H as L}from"./index-jqWcwVkE.js";import{F as D,a as u,b as x,c as p,d as h,e as w,z as i,f,u as k,t as I,h as M,i as T}from"./get-error-response-data-DBWjEeq7.js";import"./label-DE0-YdaS.js";import"./index-C2TBzLsc.js";const B=r=>{const{form:e,onSubmit:n,isLoading:a}=r;return s.jsx(D,{...e,children:s.jsxs("form",{onSubmit:e.handleSubmit(n),className:`relative max-w-[450px] w-full rounded-xl px-8 py-4 border-white border ${a?"pointer-events-none":""}`,children:[s.jsx("p",{className:"text-3xl font-semibold mb-4",children:"Reset your password"}),s.jsx(S,{className:"absolute inset-1/2",isOpening:a}),s.jsxs("div",{className:`${a?"invisible":""}`,children:[s.jsx(u,{control:e.control,name:"password",render:({field:o})=>s.jsxs(x,{className:"mb-6",children:[s.jsx(p,{children:"New Password"}),s.jsx(h,{children:s.jsx(d,{placeholder:"Enter your password",...o,type:"password"})}),s.jsx(w,{})]})}),s.jsx(u,{control:e.control,name:"confirmPassword",render:({field:o})=>s.jsxs(x,{className:"mb-4",children:[s.jsx(p,{children:"Confirm your password"}),s.jsx(h,{children:s.jsx(d,{placeholder:"Enter your password again!",...o,type:"password"})}),s.jsx(w,{})]})}),s.jsx(N,{className:" text-blue-500 hover:underline mt-8",to:"/login",children:"Return to login page?"}),s.jsx(y,{type:"submit",className:"mt-6 w-full",disabled:Object.keys(e.formState.errors).length>0,children:"Reset password"})]})]})})},H=i.object({password:i.string().min(f.PASSWORD_MIN_LENGTH).max(f.PASSWORD_MAX_LENGTH),confirmPassword:i.string()}).refine(r=>r.password===r.confirmPassword,{message:"Password and confirm password do not match each other",path:["confirmPassword"]}),C=()=>{const[r]=v(),e=r.get("token"),[n,{isLoading:a,isSuccess:o,isError:l,error:j}]=F(),{toast:c}=E(),g=R(),b=k({resolver:I(H),defaultValues:{password:"",confirmPassword:""}}),P=async t=>{n({token:e??"",password:t.password})};return m.useEffect(()=>{if(l){const t=M(j);if(console.log(t),!t)return;c({variant:"destructive",title:"Uh oh! Something went wrong.",description:"There was a problem with your request.",duration:2e3})}},[l]),m.useEffect(()=>{o&&(g("/login"),c({title:"Success",description:"Set new password successfully"}))},[o]),s.jsxs("div",{className:"flex w-full justify-center h-full min-h-screen items-center gap-10",children:[s.jsx(L,{children:s.jsx("title",{children:"Reset password"})}),s.jsxs("div",{className:"max-w-[480px] w-full flex justify-center flex-col items-center max-md:hidden",children:[s.jsx("h3",{className:" text-4xl font-semibold",children:"TMDB2"}),s.jsx("img",{src:T})]}),s.jsx(B,{form:b,onSubmit:P,isLoading:a})]})};export{C as default};
