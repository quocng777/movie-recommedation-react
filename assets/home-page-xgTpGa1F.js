import{r as n,R as w,N as m,j as e,ad as ae,$ as re,k as le,b6 as ne,B as ie,a0 as oe,l as ce,b7 as N,b8 as b,n as ue,b9 as de,ba as pe,bb as xe,bc as me,bd as he,H as fe,I as ge,be as ve,aw as S,M as T,ax as k,bf as _}from"./index-CK2H4E3S.js";import{M as $}from"./movie-card-IavtQ-7-.js";import{T as je}from"./trailer-video-dialog-CSzZJCup.js";import"./rating-indicator-C9_GTjKF.js";import"./dialog-B55C9sa1.js";var ye=["color","size","title","className"];function C(){return C=Object.assign||function(t){for(var l=1;l<arguments.length;l++){var i=arguments[l];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(t[a]=i[a])}return t},C.apply(this,arguments)}function be(t,l){if(t==null)return{};var i=we(t,l),a,r;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)a=o[r],!(l.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(t,a)&&(i[a]=t[a])}return i}function we(t,l){if(t==null)return{};var i={},a=Object.keys(t),r,o;for(o=0;o<a.length;o++)r=a[o],!(l.indexOf(r)>=0)&&(i[r]=t[r]);return i}var L=n.forwardRef(function(t,l){var i=t.color,a=t.size,r=t.title,o=t.className,u=be(t,ye);return w.createElement("svg",C({ref:l,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",width:a,height:a,fill:i,className:["bi","bi-play-fill",o].filter(Boolean).join(" ")},u),r?w.createElement("title",null,r):null,w.createElement("path",{d:"m11.596 8.697-6.363 3.692c-.54.313-1.233-.066-1.233-.697V4.308c0-.63.692-1.01 1.233-.696l6.363 3.692a.802.802 0 0 1 0 1.393"}))});L.propTypes={color:m.string,size:m.oneOfType([m.string,m.number]),title:m.string,className:m.string};L.defaultProps={color:"currentColor",size:"1em",title:null,className:""};const G=t=>{const{leftLabel:l,rightLabel:i}=t,[a,r]=n.useState(!0),o=()=>{a&&(r(!1),t.onRightClick())},u=()=>{a||(r(!0),t.onLeftClick())};return e.jsxs("div",{className:" flex rounded-full border w-fit",children:[e.jsx("div",{className:`py-2 px-4  rounded-full font-semibold cursor-pointer ${a?"bg-white text-black":"bg-inherit"} transition-all animate-fadeOut `,onClick:u,children:l||"Left"}),e.jsx("div",{className:`py-2 px-4  rounded-full font-semibold cursor-pointer ${a?"":"bg-white text-black"}`,onClick:o,children:i||"Right"})]})},Ne=t=>{const{movie:l}=t,[i,a]=n.useState(!1),{data:r,isSuccess:o}=ae(l.id),[u,p]=n.useState(),[v,h]=n.useState(!1);n.useEffect(()=>{var d,g;o&&p(((d=r.data)==null?void 0:d.results.find(y=>y.type=="Trailer"))??((g=r.data)==null?void 0:g.results[0]))},[o,r]);const j=()=>{a(!0)},x=d=>{d.stopPropagation()},f=()=>{h(d=>!d)};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"rounded-lg overflow-hidden cursor-pointer shrink-0 w-[300px]",onClick:f,children:[e.jsxs("div",{className:"w-[300px] h-[168.75px] relative group",children:[e.jsx("img",{src:re(l.backdrop_path),onLoad:j,className:`${i?"group-hover:blur-sm":"opacity-0"} rounded-lg`}),!i&&e.jsx(le,{className:"top-0 absolute bottom-0 right-0 left-0 opacity-100"}),e.jsx(ne,{movieId:l.id,children:e.jsx(ie,{variant:"ghost",size:"icon",className:"rounded-full shrink-0 absolute top-2 right-2",onClick:x,children:e.jsx(oe,{})})}),e.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-y-1/2 -translate-x-1/2 group-hover:text-red-700",children:e.jsx(L,{className:"text-5xl"})})]}),e.jsxs("div",{className:"mt-2 flex flex-col items-center",children:[e.jsx("span",{className:"font-semibold text-ellipsis line-clamp-1",children:l.original_title}),e.jsx("span",{className:"text-sm text-center",children:(u==null?void 0:u.name)||l.release_date})]})]}),u&&e.jsx(je,{video:u,open:v,onOpenChange:h})]})},Pe=()=>{const t=ce(),[l,i]=n.useState([]),[a,r]=n.useState(N.DAY),[o,u]=n.useState(b.POPULAR),[p,v]=n.useState(!0),[h,j]=n.useState(""),{staticStart:x,complete:f}=ue(),[d,g]=n.useState(!0),[y,P]=n.useState([]),[M,V]=n.useState([]),[F,H]=n.useState([]),[U,{isSuccess:E,data:D}]=de(),[W,{isSuccess:O,data:R}]=pe(),{data:I,isSuccess:z}=xe(),{data:B,isSuccess:A}=me();n.useEffect(()=>{p||v(!0),U({trendingType:{mediaType:he.MOVIE,duration:a}})},[a]),n.useEffect(()=>{var s;E&&(i((s=D.data)==null?void 0:s.results),v(!1)),f()},[E,D]),n.useEffect(()=>{var s;if(O){const c=(s=R.data)==null?void 0:s.results;P(c.slice(0,9))}},[O,R]),n.useEffect(()=>{var s;z&&V((s=I.data)==null?void 0:s.results)},[z,I]),n.useEffect(()=>{var s;A&&H((s=B.data)==null?void 0:s.results)},[A,B]);const q=()=>{x(),r(N.DAY)},Y=async()=>{x(),await _(400),u(b.POPULAR),f()},J=()=>{x(),r(N.WEEK)},X=async()=>{x(),await _(400),u(b.IN_THEATER),f()},K=()=>{h.trim()&&t(`/movie/search?query=${encodeURIComponent(h.trim())}`)},Q=s=>{t("/movie/"+s)},Z=s=>{const c=s.target.value;j(c),c.trim().length>0?W({query:c}):P([])},ee=()=>{g(!0)},se=()=>{setTimeout(()=>{g(!1)},200)},te=s=>{j(s),t(`/search?query=${encodeURIComponent(s.trim())}`)};return e.jsxs("div",{className:"w-full",children:[e.jsx(fe,{children:e.jsx("title",{children:"Homepage"})}),e.jsxs("section",{className:"px-8 flex justify-center w-full bg-discover-bg bg-no-repeat py-8 bg-black bg-center relative bg-cover",children:[e.jsx("div",{className:"absolute inset-0 bg-black opacity-35 z-10"}),e.jsxs("div",{className:"max-w-[1300px] z-20",children:[e.jsx("h3",{className:"text-4xl font-semibold",children:"Welcome to TMDB"}),e.jsx("p",{className:"text-2xl font-medium mt-2",children:"Millions of movies, TV shows and people to discover. Explore now."}),e.jsxs("div",{className:"relative",children:[e.jsx(ge,{className:"rounded-full py-6 px-6 mt-8",placeholder:"Search for a movie, tv show, person",onChange:Z,onKeyDown:s=>s.key==="Enter"&&K(),onFocus:ee,onBlur:se}),e.jsx(ve,{className:"text-white cursor-pointer absolute top-3 end-5",onClick:K}),y.length>0&&e.jsx("div",{className:`absolute bg-no-repeat bg-background w-full top-[110%] px-4 py-4 rounded-2xl border ${d?"":"hidden"}`,children:e.jsx("ul",{children:y.map(s=>e.jsx("li",{className:"w-full px-6 py-2 cursor-pointer hover:bg-accent rounded-xl",onClick:c=>{c.stopPropagation(),c.preventDefault(),te(s.name)},children:s.name},s.id))})})]})]})]}),e.jsxs("section",{className:"px-8 mt-8 w-full flex justify-center flex-col gap-8 items-center",children:[e.jsxs("div",{className:"max-w-[1300px] w-full",children:[e.jsxs("div",{className:"max-w-[1300px] flex items-center space-x-6",children:[e.jsx("h4",{className:"text-lg",children:"Trending"}),e.jsx(G,{onLeftClick:q,onRightClick:J,leftLabel:"Today",rightLabel:"This week"})]}),e.jsxs(S,{className:"w-full",children:[e.jsxs("div",{className:"flex gap-4 py-6",children:[p&&new Array(10).fill(null).map((s,c)=>e.jsx(T,{},c)),l.map(s=>e.jsx($,{movie:s,onClick:()=>Q(s.id.toString())},s.id))]}),e.jsx(k,{orientation:"horizontal"})]})]}),e.jsxs("div",{className:"max-w-[1300px] w-full",children:[e.jsxs("div",{className:"max-w-[1300px] flex items-center space-x-6",children:[e.jsx("h4",{className:"text-lg",children:"Latest Trailers"}),e.jsx(G,{onLeftClick:Y,onRightClick:X,leftLabel:"Popular",rightLabel:"In theater"})]}),e.jsxs(S,{className:"w-full",children:[e.jsxs("div",{className:"flex gap-4 py-6",children:[p&&new Array(10).fill(null).map((s,c)=>e.jsx(T,{},c)),(o==b.POPULAR?M:F).map(s=>e.jsx(Ne,{movie:s},s.id))]}),e.jsx(k,{orientation:"horizontal"})]})]}),e.jsxs("div",{className:"max-w-[1300px] w-full",children:[e.jsx("div",{className:"max-w-[1300px] flex items-center space-x-6",children:e.jsx("h4",{className:"text-lg",children:"What's popular"})}),e.jsxs(S,{className:"w-full",children:[e.jsxs("div",{className:"flex gap-4 py-6",children:[p&&new Array(10).fill(null).map((s,c)=>e.jsx(T,{},c)),M.map(s=>e.jsx($,{movie:s,onClick:()=>Q(s.id.toString())},s.id))]}),e.jsx(k,{orientation:"horizontal"})]})]})]})]})};export{Pe as default};
